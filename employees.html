<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SellerHub — Сотрудники</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html{overflow-y:scroll}
:root{
  --bg:#F0F2F5;--card:#fff;--primary:#4F6AF6;--primary-light:#EEF2FF;
  --text:#1E293B;--text-sec:#64748B;--text-muted:#94A3B8;--border:#E2E8F0;
  --ozon:#005BFF;--ozon-bg:#EBF3FF;--wb:#CB11AB;--wb-bg:#FCE7F6;
  --ym:#FC3F1D;--ym-bg:#FFF1EE;--success:#22C55E;--success-bg:#F0FDF4;
  --warning:#F59E0B;--warning-bg:#FFFBEB;--danger:#EF4444;--danger-bg:#FEF2F2;
  --r:12px;--shadow:0 1px 3px rgba(0,0,0,.04),0 1px 2px rgba(0,0,0,.06);
}
[data-theme="dark"]{
  --bg:#0F172A;--card:#1E293B;--text:#F1F5F9;--text-sec:#94A3B8;--text-muted:#64748B;
  --border:#334155;--primary-light:#1E3A5F;--shadow:0 1px 3px rgba(0,0,0,.3);
  --success-bg:#052e16;--warning-bg:#422006;--danger-bg:#450a0a;
  --ozon-bg:#001a4d;--wb-bg:#3d0533;--ym-bg:#4d1408;
}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.5}
.layout{display:flex;min-height:100vh}

/* Theme toggle */
.theme-toggle{position:fixed;top:20px;right:20px;z-index:1000;width:40px;height:40px;border-radius:10px;border:1px solid var(--border);background:var(--card);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-sec);transition:.15s}
.theme-toggle:hover{background:var(--bg);color:var(--text)}
.theme-toggle svg{width:18px;height:18px}
.theme-toggle .icon-moon{display:none}
[data-theme="dark"] .theme-toggle .icon-sun{display:none}
[data-theme="dark"] .theme-toggle .icon-moon{display:block}

/* Sidebar */
.sidebar{width:260px;background:var(--card);border-right:1px solid var(--border);padding:24px 16px;display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100;overflow-y:auto;scrollbar-width:none}
.sidebar::-webkit-scrollbar{display:none}
.logo{display:flex;align-items:center;gap:12px;padding:0 12px;margin-bottom:32px;font-weight:700;font-size:18px}
.logo-icon{width:36px;height:36px;background:linear-gradient(135deg,#4F6AF6,#7C3AED);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:16px}
.nav{display:flex;flex-direction:column;gap:2px;flex:1}
.nav-item{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:8px;color:var(--text-sec);text-decoration:none;font-size:14px;font-weight:500;transition:.15s}
.nav-item:hover{background:var(--bg);color:var(--text)}
.nav-item.active{background:var(--primary-light);color:var(--primary)}
.nav-item svg{width:20px;height:20px;flex-shrink:0}
.nav-badge{margin-left:auto;background:var(--danger);color:#fff;font-size:11px;font-weight:600;padding:2px 7px;border-radius:10px}
.nav-badge.ai{background:linear-gradient(135deg,#7C3AED,#4F6AF6);font-size:10px}
.nav-divider{height:1px;background:var(--border);margin:8px 12px}
.nav-section{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);padding:8px 12px 4px;font-weight:600}
.sidebar-footer{border-top:1px solid var(--border);padding-top:16px;margin-top:8px}
.user-block{display:flex;align-items:center;gap:12px;padding:8px 12px;border-radius:8px}
.user-avatar{width:36px;height:36px;background:linear-gradient(135deg,#a78bfa,#818cf8);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:14px}
.user-info .name{font-size:14px;font-weight:600}
.user-info .role{font-size:12px;color:var(--text-muted)}

/* Main */
.main{margin-left:260px;flex:1;min-height:100vh}

/* Header */
.header{display:flex;align-items:center;justify-content:space-between;padding:20px 32px;background:var(--card);border-bottom:1px solid var(--border)}
.header h1{font-size:22px;font-weight:700;display:flex;align-items:center;gap:12px}
.header-right{display:flex;align-items:center;gap:16px}
.header-date{font-size:13px;color:var(--text-sec);font-weight:500}
.icon-btn{width:40px;height:40px;border-radius:10px;border:1px solid var(--border);background:var(--card);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-sec);position:relative;transition:.15s}
.icon-btn:hover{background:var(--bg);color:var(--text)}
.icon-btn .dot{position:absolute;top:8px;right:8px;width:8px;height:8px;background:var(--danger);border-radius:50%;border:2px solid var(--card)}

/* Content */
.content{padding:32px}

/* Card base */
.card{background:var(--card);border-radius:var(--r);padding:24px;box-shadow:var(--shadow);border:1px solid var(--border);transition:transform .15s,box-shadow .15s}
.card:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}
.card-title{font-size:15px;font-weight:600;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between}
.card-title .period{font-size:12px;color:var(--text-muted);font-weight:500;padding:4px 10px;background:var(--bg);border-radius:6px}

/* Two column layout */
.employees-layout{display:grid;grid-template-columns:3fr 2fr;gap:24px;margin-bottom:24px;align-items:start}

/* Count badge in header */
.count-badge{display:inline-flex;align-items:center;justify-content:center;background:var(--primary);color:#fff;font-size:13px;font-weight:600;padding:2px 10px;border-radius:10px}

/* Search input */
.search-wrap{position:relative;margin-bottom:16px}
.search-wrap svg{position:absolute;left:14px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--text-muted)}
.search-input{width:100%;padding:10px 14px 10px 42px;border:1px solid var(--border);border-radius:10px;font-size:14px;font-family:inherit;background:var(--bg);color:var(--text);outline:none;transition:.15s}
.search-input:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(79,106,246,.15)}
.search-input::placeholder{color:var(--text-muted)}

/* Employee card */
.emp-card{display:flex;align-items:center;gap:14px;padding:14px 16px;border-radius:10px;cursor:pointer;transition:.15s;border:1px solid transparent;position:relative}
.emp-card:hover{background:var(--bg);border-color:var(--border)}
.emp-card.selected{background:var(--primary-light);border-color:var(--primary)}
.emp-avatar{width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:15px;flex-shrink:0}
.emp-details{flex:1;min-width:0}
.emp-name{font-size:14px;font-weight:600;display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.emp-meta{font-size:12px;color:var(--text-muted);margin-top:2px}
.emp-bottom{display:flex;align-items:center;gap:10px;margin-top:4px}

/* Role badge */
.role-badge{display:inline-flex;align-items:center;padding:2px 8px;border-radius:5px;font-size:11px;font-weight:600}
.role-owner{background:#EDE9FE;color:#7C3AED}
.role-admin{background:#DBEAFE;color:#2563EB}
.role-manager{background:#FEF3C7;color:#B45309}
.role-packer{background:#D1FAE5;color:#059669}
.role-analyst{background:#FCE7F6;color:#BE185D}
.role-accountant{background:#FFF1EE;color:#EA580C}
[data-theme="dark"] .role-owner{background:#2e1065;color:#c4b5fd}
[data-theme="dark"] .role-admin{background:#172554;color:#93c5fd}
[data-theme="dark"] .role-manager{background:#422006;color:#fde68a}
[data-theme="dark"] .role-packer{background:#052e16;color:#6ee7b7}
[data-theme="dark"] .role-analyst{background:#3d0533;color:#f9a8d4}
[data-theme="dark"] .role-accountant{background:#4d1408;color:#fdba74}

/* Status badge */
.status-badge{display:inline-flex;align-items:center;gap:5px;font-size:11px;font-weight:500}
.status-badge::before{content:'';width:6px;height:6px;border-radius:50%}
.status-active{color:var(--success)}
.status-active::before{background:var(--success)}
.status-invited{color:var(--warning)}
.status-invited::before{background:var(--warning)}
.status-blocked{color:var(--danger)}
.status-blocked::before{background:var(--danger)}

/* Last active */
.emp-last-active{font-size:11px;color:var(--text-muted)}

/* Menu button */
.emp-menu-btn{width:32px;height:32px;border-radius:8px;border:1px solid var(--border);background:var(--card);display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--text-muted);font-size:16px;font-weight:700;letter-spacing:1px;transition:.15s;flex-shrink:0}
.emp-menu-btn:hover{background:var(--bg);color:var(--text)}

/* Activity log */
.emp-activity{overflow:hidden;max-height:0;transition:max-height .3s ease;margin-top:0}
.emp-activity.open{max-height:300px;margin-top:8px}
.emp-activity-inner{padding:12px 16px;background:var(--bg);border-radius:8px;margin:0 16px 8px 16px}
.activity-title{font-size:12px;font-weight:600;color:var(--text-sec);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}
.activity-entry{display:flex;align-items:flex-start;gap:8px;padding:6px 0;font-size:12px;color:var(--text-sec)}
.activity-entry .activity-time{font-size:11px;color:var(--text-muted);white-space:nowrap;min-width:56px}
.activity-entry .activity-dot{width:6px;height:6px;border-radius:50%;background:var(--primary);flex-shrink:0;margin-top:5px}
.activity-entry .activity-text{flex:1}

/* Invite button */
.invite-btn{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:12px;margin-top:16px;border:2px dashed var(--border);border-radius:10px;background:transparent;color:var(--primary);font-size:14px;font-weight:600;font-family:inherit;cursor:pointer;transition:.15s}
.invite-btn:hover{background:var(--primary-light);border-color:var(--primary)}
.invite-btn svg{width:18px;height:18px}

/* Select dropdown */
.emp-select{padding:8px 12px;border:1px solid var(--border);border-radius:8px;font-size:13px;font-family:inherit;background:var(--card);color:var(--text);outline:none;cursor:pointer;min-width:200px}
.emp-select:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(79,106,246,.15)}

/* RBAC Matrix */
.matrix-wrap{overflow-x:auto;margin-top:4px}
.matrix-table{width:100%;border-collapse:collapse;font-size:13px}
.matrix-table th{text-align:center;padding:8px 6px;font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.3px;border-bottom:2px solid var(--border);white-space:nowrap}
.matrix-table th:first-child{text-align:left;padding-left:12px}
.matrix-table td{padding:10px 6px;text-align:center;border-bottom:1px solid var(--border)}
.matrix-table td:first-child{text-align:left;padding-left:12px;font-weight:500;font-size:13px;white-space:nowrap}
.matrix-table tr:last-child td{border-bottom:none}
.matrix-table tr:hover{background:var(--bg)}

/* Custom checkbox */
.cbx{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:5px;border:2px solid var(--border);background:var(--card);cursor:default;transition:.15s;position:relative}
.cbx.checked{background:var(--primary);border-color:var(--primary)}
.cbx.checked::after{content:'';display:block;width:5px;height:9px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);margin-top:-1px}
.cbx.disabled{opacity:.3;cursor:not-allowed}

/* Role cards */
.roles-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:24px}
.role-card{background:var(--card);border-radius:var(--r);padding:20px;box-shadow:var(--shadow);border:1px solid var(--border);transition:transform .15s,box-shadow .15s}
.role-card:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}
.role-card-header{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.role-card-icon{width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.role-card-icon svg{width:18px;height:18px}
.role-card-name{font-size:15px;font-weight:600}
.role-card-desc{font-size:12px;color:var(--text-sec);line-height:1.5}

/* Badge generic */
.badge{display:inline-flex;align-items:center;padding:3px 8px;border-radius:5px;font-size:11px;font-weight:600}

/* Connection status */
.connection-dot{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--success);font-weight:500}
.connection-dot::before{content:'';width:6px;height:6px;background:var(--success);border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
</style>
</head>
<body>
<div class="layout">
  <!-- Theme toggle -->
  <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
  </button>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-icon">S</div>
      <span>SellerHub</span>
    </div>
    <nav class="nav">
      <div class="nav-section">Основное</div>
      <a href="index.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span>Главная</span></a>
      <a href="orders.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 01-8 0"/></svg><span>Заказы</span><span class="nav-badge">12</span></a>
      <a href="product-create.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg><span>Создание карточки</span><span class="nav-badge ai">AI</span></a>
      <a href="stock.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 002 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg><span>Остатки</span></a>
      <div class="nav-divider"></div>
      <div class="nav-section">Аналитика</div>
      <a href="analytics.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg><span>Продажи</span></a>
      <a href="product-analytics.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg><span>Товарная аналитика</span></a>
      <div class="nav-divider"></div>
      <div class="nav-section">Операции</div>
      <a href="accounting.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg><span>Бухгалтерия</span></a>
      <a href="videos.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg><span>Видеоархив</span></a>
      <a href="chats.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"/></svg><span>Чаты</span><span class="nav-badge">3</span></a>
      <a href="pricing.html" class="nav-item"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><span>Тарифы</span></a>
      <div class="nav-divider"></div>
      <div class="nav-section">Управление</div>
      <a href="employees.html" class="nav-item active"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg><span>Сотрудники</span><span class="nav-badge" style="background:var(--primary)">6</span></a>
    </nav>
    <div class="sidebar-footer">
      <div class="user-block">
        <div class="user-avatar">АМ</div>
        <div class="user-info">
          <div class="name">Алексей М.</div>
          <div class="role">Владелец</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main -->
  <div class="main">
    <div class="header">
      <div>
        <h1>
          Управление командой
          <span class="count-badge">6 сотрудников</span>
        </h1>
        <div class="header-date" style="margin-top:4px;font-size:13px;color:var(--text-sec)">
          <span class="connection-dot">Подключено</span>
        </div>
      </div>
      <div class="header-right">
        <div class="icon-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </div>
        <div class="icon-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg>
          <span class="dot"></span>
        </div>
      </div>
    </div>

    <div class="content">
      <div class="employees-layout">
        <!-- Left column: Employee list -->
        <div>
          <div class="card" style="transform:none;box-shadow:var(--shadow)" onmouseenter="this.style.transform='none'" onmouseleave="this.style.transform='none'">
            <div class="card-title">
              Команда
              <span class="period">6 человек</span>
            </div>
            <div class="search-wrap">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
              <input type="text" class="search-input" placeholder="Поиск сотрудника..." id="empSearch" oninput="filterEmployees()">
            </div>

            <div id="empList">
              <!-- Employee 1: Alexey -->
              <div class="emp-card selected" onclick="selectEmployee(0)" data-emp="0">
                <div class="emp-avatar" style="background:linear-gradient(135deg,#7C3AED,#6D28D9)">АМ</div>
                <div class="emp-details">
                  <div class="emp-name">
                    Алексей Морозов
                    <span class="role-badge role-owner">Владелец</span>
                  </div>
                  <div class="emp-meta">alexey@sellerhub.ru</div>
                  <div class="emp-bottom">
                    <span class="status-badge status-active">Активен</span>
                    <span class="emp-last-active">Сейчас онлайн</span>
                  </div>
                </div>
                <button class="emp-menu-btn" onclick="event.stopPropagation()">...</button>
              </div>
              <div class="emp-activity" id="activity-0">
                <div class="emp-activity-inner">
                  <div class="activity-title">Последние действия</div>
                  <div class="activity-entry"><span class="activity-time">09:45</span><span class="activity-dot"></span><span class="activity-text">Изменил права роли "Менеджер"</span></div>
                  <div class="activity-entry"><span class="activity-time">09:30</span><span class="activity-dot"></span><span class="activity-text">Утвердил отчёт по аналитике за январь</span></div>
                  <div class="activity-entry"><span class="activity-time">09:12</span><span class="activity-dot"></span><span class="activity-text">Обновил тарифный план на "Бизнес"</span></div>
                  <div class="activity-entry"><span class="activity-time">08:55</span><span class="activity-dot"></span><span class="activity-text">Авторизовался в системе</span></div>
                </div>
              </div>

              <!-- Employee 2: Maria -->
              <div class="emp-card" onclick="selectEmployee(1)" data-emp="1">
                <div class="emp-avatar" style="background:linear-gradient(135deg,#2563EB,#1D4ED8)">МП</div>
                <div class="emp-details">
                  <div class="emp-name">
                    Мария Петрова
                    <span class="role-badge role-admin">Администратор</span>
                  </div>
                  <div class="emp-meta">maria@sellerhub.ru</div>
                  <div class="emp-bottom">
                    <span class="status-badge status-active">Активен</span>
                    <span class="emp-last-active">2 мин назад</span>
                  </div>
                </div>
                <button class="emp-menu-btn" onclick="event.stopPropagation()">...</button>
              </div>
              <div class="emp-activity" id="activity-1">
                <div class="emp-activity-inner">
                  <div class="activity-title">Последние действия</div>
                  <div class="activity-entry"><span class="activity-time">09:43</span><span class="activity-dot"></span><span class="activity-text">Обработала заказ #OZ-284735</span></div>
                  <div class="activity-entry"><span class="activity-time">09:28</span><span class="activity-dot"></span><span class="activity-text">Обновила карточку товара "Кроссовки Nike"</span></div>
                  <div class="activity-entry"><span class="activity-time">09:10</span><span class="activity-dot"></span><span class="activity-text">Ответила на чат покупателя</span></div>
                </div>
              </div>

              <!-- Employee 3: Dmitry -->
              <div class="emp-card" onclick="selectEmployee(2)" data-emp="2">
                <div class="emp-avatar" style="background:linear-gradient(135deg,#D97706,#B45309)">ДК</div>
                <div class="emp-details">
                  <div class="emp-name">
                    Дмитрий Козлов
                    <span class="role-badge role-manager">Менеджер</span>
                  </div>
                  <div class="emp-meta">dmitry@sellerhub.ru</div>
                  <div class="emp-bottom">
                    <span class="status-badge status-active">Активен</span>
                    <span class="emp-last-active">15 мин назад</span>
                  </div>
                </div>
                <button class="emp-menu-btn" onclick="event.stopPropagation()">...</button>
              </div>
              <div class="emp-activity" id="activity-2">
                <div class="emp-activity-inner">
                  <div class="activity-title">Последние действия</div>
                  <div class="activity-entry"><span class="activity-time">09:30</span><span class="activity-dot"></span><span class="activity-text">Создал новый заказ для Ozon FBS</span></div>
                  <div class="activity-entry"><span class="activity-time">09:15</span><span class="activity-dot"></span><span class="activity-text">Обновил остатки на складе (47 SKU)</span></div>
                  <div class="activity-entry"><span class="activity-time">08:50</span><span class="activity-dot"></span><span class="activity-text">Ответил в чате #WB-192850</span></div>
                </div>
              </div>

              <!-- Employee 4: Anna -->
              <div class="emp-card" onclick="selectEmployee(3)" data-emp="3">
                <div class="emp-avatar" style="background:linear-gradient(135deg,#DB2777,#BE185D)">АС</div>
                <div class="emp-details">
                  <div class="emp-name">
                    Анна Сидорова
                    <span class="role-badge role-analyst">Аналитик</span>
                  </div>
                  <div class="emp-meta">anna@sellerhub.ru</div>
                  <div class="emp-bottom">
                    <span class="status-badge status-active">Активен</span>
                    <span class="emp-last-active">1 час назад</span>
                  </div>
                </div>
                <button class="emp-menu-btn" onclick="event.stopPropagation()">...</button>
              </div>
              <div class="emp-activity" id="activity-3">
                <div class="emp-activity-inner">
                  <div class="activity-title">Последние действия</div>
                  <div class="activity-entry"><span class="activity-time">08:45</span><span class="activity-dot"></span><span class="activity-text">Экспортировала отчёт "Продажи за январь"</span></div>
                  <div class="activity-entry"><span class="activity-time">08:20</span><span class="activity-dot"></span><span class="activity-text">Просмотрела аналитику по категориям</span></div>
                  <div class="activity-entry"><span class="activity-time">08:05</span><span class="activity-dot"></span><span class="activity-text">Открыла дашборд бухгалтерии</span></div>
                </div>
              </div>

              <!-- Employee 5: Igor -->
              <div class="emp-card" onclick="selectEmployee(4)" data-emp="4">
                <div class="emp-avatar" style="background:linear-gradient(135deg,#059669,#047857)">ИВ</div>
                <div class="emp-details">
                  <div class="emp-name">
                    Игорь Волков
                    <span class="role-badge role-packer">Упаковщик</span>
                  </div>
                  <div class="emp-meta">igor@sellerhub.ru</div>
                  <div class="emp-bottom">
                    <span class="status-badge status-active">Активен</span>
                    <span class="emp-last-active">3 часа назад</span>
                  </div>
                </div>
                <button class="emp-menu-btn" onclick="event.stopPropagation()">...</button>
              </div>
              <div class="emp-activity" id="activity-4">
                <div class="emp-activity-inner">
                  <div class="activity-title">Последние действия</div>
                  <div class="activity-entry"><span class="activity-time">06:55</span><span class="activity-dot"></span><span class="activity-text">Записал видео упаковки заказа #OZ-284729</span></div>
                  <div class="activity-entry"><span class="activity-time">06:40</span><span class="activity-dot"></span><span class="activity-text">Просмотрел список заказов на упаковку</span></div>
                  <div class="activity-entry"><span class="activity-time">06:30</span><span class="activity-dot"></span><span class="activity-text">Авторизовался в системе</span></div>
                </div>
              </div>

              <!-- Employee 6: Elena -->
              <div class="emp-card" onclick="selectEmployee(5)" data-emp="5">
                <div class="emp-avatar" style="background:linear-gradient(135deg,#EA580C,#C2410C)">ЕН</div>
                <div class="emp-details">
                  <div class="emp-name">
                    Елена Новикова
                    <span class="role-badge role-accountant">Бухгалтер</span>
                  </div>
                  <div class="emp-meta">elena@sellerhub.ru</div>
                  <div class="emp-bottom">
                    <span class="status-badge status-invited">Приглашён</span>
                    <span class="emp-last-active">Ожидает подтверждения</span>
                  </div>
                </div>
                <button class="emp-menu-btn" onclick="event.stopPropagation()">...</button>
              </div>
              <div class="emp-activity" id="activity-5">
                <div class="emp-activity-inner">
                  <div class="activity-title">Последние действия</div>
                  <div class="activity-entry"><span class="activity-time">--:--</span><span class="activity-dot" style="background:var(--warning)"></span><span class="activity-text">Приглашение отправлено на elena@sellerhub.ru</span></div>
                  <div class="activity-entry"><span class="activity-time">Вчера</span><span class="activity-dot" style="background:var(--text-muted)"></span><span class="activity-text">Создан аккаунт пользователя</span></div>
                </div>
              </div>
            </div>

            <button class="invite-btn">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
              Пригласить сотрудника
            </button>
          </div>
        </div>

        <!-- Right column: RBAC Matrix -->
        <div>
          <div class="card" style="transform:none;box-shadow:var(--shadow)" onmouseenter="this.style.transform='none'" onmouseleave="this.style.transform='none'">
            <div class="card-title">
              Матрица доступов
            </div>
            <div style="margin-bottom:16px">
              <select class="emp-select" id="matrixSelect" onchange="updateMatrix()">
                <option value="0">Алексей Морозов — Владелец</option>
                <option value="1">Мария Петрова — Администратор</option>
                <option value="2">Дмитрий Козлов — Менеджер</option>
                <option value="3">Анна Сидорова — Аналитик</option>
                <option value="4">Игорь Волков — Упаковщик</option>
                <option value="5">Елена Новикова — Бухгалтер</option>
              </select>
            </div>
            <div class="matrix-wrap">
              <table class="matrix-table" id="matrixTable">
                <thead>
                  <tr>
                    <th>Модуль</th>
                    <th>Просмотр</th>
                    <th>Редакт.</th>
                    <th>Создание</th>
                    <th>Удаление</th>
                    <th>Экспорт</th>
                  </tr>
                </thead>
                <tbody id="matrixBody">
                  <!-- Filled by JS -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Role cards -->
      <div style="margin-top:0">
        <div style="font-size:17px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;gap:10px">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          Роли и права доступа
        </div>
        <div class="roles-grid">
          <div class="role-card">
            <div class="role-card-header">
              <div class="role-card-icon" style="background:#EDE9FE;color:#7C3AED">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              </div>
              <div class="role-card-name">Владелец</div>
            </div>
            <div class="role-card-desc">Полный доступ ко всем модулям и настройкам платформы. Управление командой, тарифами и интеграциями.</div>
          </div>
          <div class="role-card">
            <div class="role-card-header">
              <div class="role-card-icon" style="background:#DBEAFE;color:#2563EB">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              </div>
              <div class="role-card-name">Администратор</div>
            </div>
            <div class="role-card-desc">Все права кроме удаления тарифов и управления владельцем. Полный доступ к операциям и настройкам.</div>
          </div>
          <div class="role-card">
            <div class="role-card-header">
              <div class="role-card-icon" style="background:#FEF3C7;color:#B45309">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4-4v2"/><circle cx="8.5" cy="7" r="4"/></svg>
              </div>
              <div class="role-card-name">Менеджер</div>
            </div>
            <div class="role-card-desc">Заказы, товары, остатки, чаты (полный CRUD). Аналитика доступна только для просмотра.</div>
          </div>
          <div class="role-card">
            <div class="role-card-header">
              <div class="role-card-icon" style="background:#D1FAE5;color:#059669">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 002 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/></svg>
              </div>
              <div class="role-card-name">Упаковщик</div>
            </div>
            <div class="role-card-desc">Заказы (только просмотр), видеоархив (просмотр и создание записей). Минимальный набор прав.</div>
          </div>
          <div class="role-card">
            <div class="role-card-header">
              <div class="role-card-icon" style="background:#FCE7F6;color:#BE185D">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
              </div>
              <div class="role-card-name">Аналитик</div>
            </div>
            <div class="role-card-desc">Аналитика и бухгалтерия (просмотр и экспорт). Доступ к отчётам, дашбордам и выгрузкам.</div>
          </div>
          <div class="role-card">
            <div class="role-card-header">
              <div class="role-card-icon" style="background:#FFF1EE;color:#EA580C">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
              </div>
              <div class="role-card-name">Бухгалтер</div>
            </div>
            <div class="role-card-desc">Бухгалтерия (полный доступ), аналитика (только просмотр). Финансовые отчёты и документы.</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Employees data
const employees = [
  { name:'Алексей Морозов', role:'Владелец', email:'alexey@sellerhub.ru', initials:'АМ' },
  { name:'Мария Петрова', role:'Администратор', email:'maria@sellerhub.ru', initials:'МП' },
  { name:'Дмитрий Козлов', role:'Менеджер', email:'dmitry@sellerhub.ru', initials:'ДК' },
  { name:'Анна Сидорова', role:'Аналитик', email:'anna@sellerhub.ru', initials:'АС' },
  { name:'Игорь Волков', role:'Упаковщик', email:'igor@sellerhub.ru', initials:'ИВ' },
  { name:'Елена Новикова', role:'Бухгалтер', email:'elena@sellerhub.ru', initials:'ЕН' }
];

// Modules list
const modules = [
  'Заказы','Товары','Остатки','Аналитика','Бухгалтерия',
  'Чаты','Видеоархив','Тарифы','AI-функции'
];

// Permissions: [view, edit, create, delete, export] per module per role
const permissions = {
  'Владелец': {
    'Заказы':      [1,1,1,1,1],
    'Товары':      [1,1,1,1,1],
    'Остатки':     [1,1,1,1,1],
    'Аналитика':   [1,1,1,1,1],
    'Бухгалтерия': [1,1,1,1,1],
    'Чаты':        [1,1,1,1,1],
    'Видеоархив':  [1,1,1,1,1],
    'Тарифы':      [1,1,1,1,1],
    'AI-функции':  [1,1,1,1,1]
  },
  'Администратор': {
    'Заказы':      [1,1,1,1,1],
    'Товары':      [1,1,1,1,1],
    'Остатки':     [1,1,1,1,1],
    'Аналитика':   [1,1,1,1,1],
    'Бухгалтерия': [1,1,1,1,1],
    'Чаты':        [1,1,1,1,1],
    'Видеоархив':  [1,1,1,1,1],
    'Тарифы':      [1,1,1,0,1],
    'AI-функции':  [1,1,1,1,1]
  },
  'Менеджер': {
    'Заказы':      [1,1,1,1,0],
    'Товары':      [1,1,1,1,0],
    'Остатки':     [1,1,1,1,0],
    'Аналитика':   [1,0,0,0,0],
    'Бухгалтерия': [0,0,0,0,0],
    'Чаты':        [1,1,1,1,0],
    'Видеоархив':  [0,0,0,0,0],
    'Тарифы':      [0,0,0,0,0],
    'AI-функции':  [0,0,0,0,0]
  },
  'Аналитик': {
    'Заказы':      [0,0,0,0,0],
    'Товары':      [0,0,0,0,0],
    'Остатки':     [0,0,0,0,0],
    'Аналитика':   [1,0,0,0,1],
    'Бухгалтерия': [1,0,0,0,1],
    'Чаты':        [0,0,0,0,0],
    'Видеоархив':  [0,0,0,0,0],
    'Тарифы':      [0,0,0,0,0],
    'AI-функции':  [0,0,0,0,0]
  },
  'Упаковщик': {
    'Заказы':      [1,0,0,0,0],
    'Товары':      [0,0,0,0,0],
    'Остатки':     [0,0,0,0,0],
    'Аналитика':   [0,0,0,0,0],
    'Бухгалтерия': [0,0,0,0,0],
    'Чаты':        [0,0,0,0,0],
    'Видеоархив':  [1,0,1,0,0],
    'Тарифы':      [0,0,0,0,0],
    'AI-функции':  [0,0,0,0,0]
  },
  'Бухгалтер': {
    'Заказы':      [0,0,0,0,0],
    'Товары':      [0,0,0,0,0],
    'Остатки':     [0,0,0,0,0],
    'Аналитика':   [1,0,0,0,0],
    'Бухгалтерия': [1,1,1,1,1],
    'Чаты':        [0,0,0,0,0],
    'Видеоархив':  [0,0,0,0,0],
    'Тарифы':      [0,0,0,0,0],
    'AI-функции':  [0,0,0,0,0]
  }
};

let selectedEmp = 0;
let expandedActivity = -1;

function selectEmployee(idx) {
  // Update card selection
  document.querySelectorAll('.emp-card').forEach(c => c.classList.remove('selected'));
  document.querySelectorAll('.emp-card')[idx].classList.add('selected');
  selectedEmp = idx;

  // Toggle activity panel
  if (expandedActivity === idx) {
    document.getElementById('activity-' + idx).classList.remove('open');
    expandedActivity = -1;
  } else {
    // Close previous
    if (expandedActivity >= 0) {
      document.getElementById('activity-' + expandedActivity).classList.remove('open');
    }
    document.getElementById('activity-' + idx).classList.add('open');
    expandedActivity = idx;
  }

  // Sync dropdown
  document.getElementById('matrixSelect').value = idx;
  updateMatrix();
}

function updateMatrix() {
  const idx = parseInt(document.getElementById('matrixSelect').value);
  const role = employees[idx].role;
  const perms = permissions[role];
  const tbody = document.getElementById('matrixBody');
  let html = '';
  modules.forEach(mod => {
    const p = perms[mod] || [0,0,0,0,0];
    html += '<tr><td>' + mod + '</td>';
    for (let i = 0; i < 5; i++) {
      html += '<td><span class="cbx' + (p[i] ? ' checked' : '') + '"></span></td>';
    }
    html += '</tr>';
  });
  tbody.innerHTML = html;

  // Also select the card
  document.querySelectorAll('.emp-card').forEach(c => c.classList.remove('selected'));
  document.querySelectorAll('.emp-card')[idx].classList.add('selected');
  selectedEmp = idx;
}

function filterEmployees() {
  const query = document.getElementById('empSearch').value.toLowerCase();
  const cards = document.querySelectorAll('.emp-card');
  const activities = document.querySelectorAll('.emp-activity');
  cards.forEach((card, i) => {
    const emp = employees[i];
    const text = (emp.name + ' ' + emp.role + ' ' + emp.email).toLowerCase();
    const visible = text.includes(query);
    card.style.display = visible ? '' : 'none';
    activities[i].style.display = visible ? '' : 'none';
  });
}

function toggleTheme() {
  const html = document.documentElement;
  if (html.getAttribute('data-theme') === 'dark') {
    html.removeAttribute('data-theme');
  } else {
    html.setAttribute('data-theme', 'dark');
  }
}

// Init matrix on load
updateMatrix();
</script>
</body>
</html>